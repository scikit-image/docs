
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How to contribute to scikit-image &#8212; skimage 0.24.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../_static/theme_overrides.css?v=4340df76" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../_static/documentation_options.js?v=a9084e48"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script data-domain="scikit-image.org" defer="defer" src="https://views.scientific-python.org/js/script.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'development/contribute';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.3';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://scikit-image.org/docs/dev/_static/version_switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.24.0';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = true;
        </script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Working with scikit-image source code" href="../gitwash/index.html" />
    <link rel="prev" title="Development" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

   

<a class="navbar-brand logo" href="https://scikit-image.org">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="scikit-image's logo, showing a snake's head overlayed with green and orange"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="scikit-image's logo, showing a snake's head overlayed with green and orange"/>`);</script>
  
  
    <p class="title logo__title">scikit-image</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../user_guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../auto_examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../api/api.html">
    API reference
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../release_notes/index.html">
    Release notes
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Development
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/scikit-image/scikit-image" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/scikit-image/" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-solid fa-box fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../user_guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../auto_examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../api/api.html">
    API reference
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../release_notes/index.html">
    Release notes
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Development
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/scikit-image/scikit-image" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/scikit-image/" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-solid fa-box fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">How to contribute to scikit-image</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../gitwash/index.html">Working with <em>scikit-image</em> source code</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../gitwash/git_intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gitwash/git_install.html">Install git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gitwash/following_latest.html">Following the latest source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gitwash/patching.html">Making a patch</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../gitwash/git_development.html">Git for development</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../gitwash/forking_hell.html">Making your own copy (fork) of scikit-image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gitwash/set_up_fork.html">Set up your fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gitwash/configure_git.html">Configure git</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gitwash/development_workflow.html">Development workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gitwash/maintainer_workflow.html">Maintainer workflow</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../gitwash/git_resources.html">git resources</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="core_developer.html">Core Developer Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../skips/index.html">scikit-image proposals (SKIPS)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../skips/0-skip-process.html">SKIP 0 — Purpose and Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../skips/1-governance.html">SKIP 1 — scikit-image governance and decision-making</a></li>
<li class="toctree-l2"><a class="reference internal" href="../skips/2-values.html">SKIP 2 — scikit-image mission statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../skips/3-transition-to-v1.html">SKIP 3 — Transitioning to scikit-image 1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../skips/4-transition-to-v2.html">SKIP 4 — Transitioning to scikit-image 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../skips/template.html">SKIP X — Template and Instructions</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Development</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">How to...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="how-to-contribute-to-scikit-image">
<span id="howto-contribute"></span><h1>How to contribute to scikit-image<a class="headerlink" href="#how-to-contribute-to-scikit-image" title="Link to this heading">#</a></h1>
<p>Developing Open Source is great fun! Join us on the <a class="reference external" href="https://discuss.scientific-python.org/c/contributor/skimage">scikit-image
developer forum</a>.</p>
<p>If you’re looking for something to implement or to fix, you can browse the
<a class="reference external" href="https://github.com/scikit-image/scikit-image/issues?q=is%3Aopen">open issues on GitHub</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Given the uncertainty around licensing of AI-generated code, we
require that you <strong>not</strong> make use of these tools during the development
of any contributions to scikit-image.</p>
</div>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#development-process" id="id2">Development process</a></p></li>
<li><p><a class="reference internal" href="#divergence-between-upstream-main-and-your-feature-branch" id="id3">Divergence between <code class="docutils literal notranslate"><span class="pre">upstream</span> <span class="pre">main</span></code> and your feature branch</a></p></li>
<li><p><a class="reference internal" href="#guidelines" id="id4">Guidelines</a></p></li>
<li><p><a class="reference internal" href="#stylistic-guidelines" id="id5">Stylistic Guidelines</a></p></li>
<li><p><a class="reference internal" href="#testing" id="id6">Testing</a></p>
<ul>
<li><p><a class="reference internal" href="#warnings-during-testing-phase" id="id7">Warnings during testing phase</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#test-coverage" id="id8">Test coverage</a></p></li>
<li><p><a class="reference internal" href="#building-docs" id="id9">Building docs</a></p>
<ul>
<li><p><a class="reference internal" href="#gallery" id="id10">Gallery</a></p></li>
<li><p><a class="reference internal" href="#fixing-warnings" id="id11">Fixing Warnings</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#deprecation-cycle" id="id12">Deprecation cycle</a></p>
<ul>
<li><p><a class="reference internal" href="#raising-warnings" id="id13">Raising Warnings</a></p></li>
<li><p><a class="reference internal" href="#deprecating-keywords-and-functions" id="id14">Deprecating Keywords and Functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#adding-data" id="id15">Adding Data</a></p></li>
<li><p><a class="reference internal" href="#benchmarks" id="id16">Benchmarks</a></p>
<ul>
<li><p><a class="reference internal" href="#prerequisites" id="id17">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#writing-a-benchmark" id="id18">Writing a benchmark</a></p></li>
<li><p><a class="reference internal" href="#testing-the-benchmarks-locally" id="id19">Testing the benchmarks locally</a></p></li>
<li><p><a class="reference internal" href="#running-your-benchmark" id="id20">Running your benchmark</a></p></li>
<li><p><a class="reference internal" href="#comparing-results-to-main" id="id21">Comparing results to main</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="development-process">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Development process</a><a class="headerlink" href="#development-process" title="Link to this heading">#</a></h2>
<p>The following is a brief overview about how changes to source code and documentation
can be contributed to scikit-image.</p>
<ol class="arabic">
<li><p>If you are a first-time contributor:</p>
<ul>
<li><p>Go to <a class="github reference external" href="https://github.com/scikit-image/scikit-image">scikit-image/scikit-image</a> and click the
“fork” button to create your own copy of the project.</p></li>
<li><p>Clone (download) the repository with the project source on your local computer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">your</span><span class="o">-</span><span class="n">username</span><span class="o">/</span><span class="n">scikit</span><span class="o">-</span><span class="n">image</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Change into the root directory of the cloned repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">scikit</span><span class="o">-</span><span class="n">image</span>
</pre></div>
</div>
</li>
<li><p>Add the upstream repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">upstream</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">scikit</span><span class="o">-</span><span class="n">image</span><span class="o">/</span><span class="n">scikit</span><span class="o">-</span><span class="n">image</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Now, you have remote repositories named:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">upstream</span></code>, which refers to the <code class="docutils literal notranslate"><span class="pre">scikit-image</span></code> repository, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origin</span></code>, which refers to your personal fork.</p></li>
</ul>
</li>
<li><p>Next, <a class="reference internal" href="../user_guide/install.html#build-env-setup"><span class="std std-ref">set up your build environment</span></a>.</p></li>
<li><p>Finally, we recommend that you use a pre-commit hook, which runs code
checkers and formatters each time you do a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pre</span><span class="o">-</span><span class="n">commit</span>
<span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">install</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Develop your contribution:</p>
<ul>
<li><p>Pull the latest changes from upstream:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">main</span>
<span class="n">git</span> <span class="n">pull</span> <span class="n">upstream</span> <span class="n">main</span>
</pre></div>
</div>
</li>
<li><p>Create a branch for the feature you want to work on. Use a sensible name,
such as ‘transform-speedups’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">transform</span><span class="o">-</span><span class="n">speedups</span>
</pre></div>
</div>
</li>
<li><p>Commit locally as you progress (with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>).
Please write <a class="reference external" href="https://vxlabs.com/software-development-handbook/#good-commit-messages">good commit messages</a>.</p></li>
</ul>
</li>
<li><p>To submit your contribution:</p>
<ul>
<li><p>Push your changes back to your fork on GitHub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">transform</span><span class="o">-</span><span class="n">speedups</span>
</pre></div>
</div>
</li>
<li><p>Enter your GitHub username and password (repeat contributors or advanced
users can remove this step by <a class="reference external" href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh">connecting to GitHub with SSH</a>).</p></li>
<li><p>Go to GitHub. The new branch will show up with a green “pull request”
button – click it.</p></li>
<li><p>If you want, post on the <a class="reference external" href="https://discuss.scientific-python.org/c/contributor/skimage">developer forum</a> to explain your changes or
to ask for review.</p></li>
</ul>
</li>
</ol>
<p>For a more detailed discussion, read these <a class="reference internal" href="../gitwash/index.html"><span class="doc">detailed documents</span></a> on how to use Git with <code class="docutils literal notranslate"><span class="pre">scikit-image</span></code> (<a class="reference internal" href="../gitwash/index.html#using-git"><span class="std std-ref">Working with scikit-image source code</span></a>).</p>
<ol class="arabic simple" start="4">
<li><p>Review process:</p>
<ul class="simple">
<li><p>Reviewers (the other developers and interested community members) will
write inline and/or general comments on your pull request (PR) to help
you improve its implementation, documentation, and style.  Every single
developer working on the project has their code reviewed, and we’ve come
to see it as a friendly conversation from which we all learn and the
overall code quality benefits.  Therefore, please don’t let the review
discourage you from contributing: its only aim is to improve the quality
of the project, not to criticize (we are, after all, very grateful for the
time you’re donating!).</p></li>
<li><p>To update your pull request, make your changes on your local repository
and commit. As soon as those changes are pushed up (to the same branch as
before) the pull request will update automatically.</p></li>
<li><p>Continuous integration (CI) services are triggered after each pull request
submission to build the package, run unit tests, measure code coverage,
and check the coding style (PEP8) of your branch. The tests must pass
before your PR can be merged. If CI fails, you can find out why by
clicking on the “failed” icon (red cross) and inspecting the build and
test logs.</p></li>
<li><p>A pull request must be approved by two core team members before merging.</p></li>
</ul>
</li>
</ol>
<ol class="arabic" id="documenting-changes" start="5">
<li><p>Document changes</p>
<p>If your change introduces a deprecation, add a reminder to <code class="docutils literal notranslate"><span class="pre">TODO.txt</span></code>
for the team to remove the deprecated functionality in the future.</p>
<p>scikit-image uses <a class="reference external" href="https://github.com/scientific-python/changelist">changelist</a>
to generate a list of release notes automatically from pull requests. By
default, changelist will use the title of a pull request and its GitHub
labels to sort it into the appropriate section. However, for more complex
changes, we encourage you to describe them in more detail using the
<em class="xref py py-obj">release-note</em> code block within the pull request description; e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```release-note
Remove the deprecated function `skimage.color.blue`. Blend
`skimage.color.cyan` and `skimage.color.magenta` instead.
```
</pre></div>
</div>
<p>You can refer to <a class="reference internal" href="../release_notes/index.html"><span class="doc">Release notes</span></a> for examples and to
<a class="reference external" href="https://github.com/scientific-python/changelist">changelist’s documentation</a>
for more details.</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To reviewers: if it is not obvious from the PR description, make sure that
the reason and context for a change are described in the merge message.</p>
</div>
</section>
<section id="divergence-between-upstream-main-and-your-feature-branch">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Divergence between <code class="docutils literal notranslate"><span class="pre">upstream</span> <span class="pre">main</span></code> and your feature branch</a><a class="headerlink" href="#divergence-between-upstream-main-and-your-feature-branch" title="Link to this heading">#</a></h2>
<p>If GitHub indicates that the branch of your PR can no longer
be merged automatically, merge the main branch into yours:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">fetch</span> <span class="n">upstream</span> <span class="n">main</span>
<span class="n">git</span> <span class="n">merge</span> <span class="n">upstream</span><span class="o">/</span><span class="n">main</span>
</pre></div>
</div>
<p>If any conflicts occur, they need to be fixed before continuing.  See
which files are in conflict using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">status</span>
</pre></div>
</div>
<p>Which displays a message like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Unmerged</span> <span class="n">paths</span><span class="p">:</span>
  <span class="p">(</span><span class="n">use</span> <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> <span class="n">to</span> <span class="n">mark</span> <span class="n">resolution</span><span class="p">)</span>

  <span class="n">both</span> <span class="n">modified</span><span class="p">:</span>   <span class="n">file_with_conflict</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Inside the conflicted file, you’ll find sections like these:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">way</span> <span class="n">the</span> <span class="n">text</span> <span class="n">looks</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">branch</span>
</pre></div>
</div>
<p>Choose one version of the text that should be kept, and delete the
rest:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">way</span> <span class="n">the</span> <span class="n">text</span> <span class="n">looks</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">branch</span>
</pre></div>
</div>
<p>Now, add the fixed file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="n">file_with_conflict</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Once you’ve fixed all merge conflicts, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Advanced Git users are encouraged to <a class="reference external" href="https://scikit-image.org/docs/dev/gitwash/development_workflow.html#rebasing-on-trunk">rebase instead of merge</a>,
but we squash and merge most PRs either way.</p>
</div>
</section>
<section id="guidelines">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Guidelines</a><a class="headerlink" href="#guidelines" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>All code should have tests (see <a class="reference internal" href="#test-coverage">test coverage</a> below for more details).</p></li>
<li><p>All code should be documented, to the same
<a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard">standard</a> as NumPy and SciPy.</p></li>
<li><p>For new functionality, always add an example to the gallery (see
<a class="reference internal" href="#gallery">Gallery</a> below for more details).</p></li>
<li><p>No changes are ever merged without review and approval by two core team members.
There are two exceptions to this rule. First, pull requests which affect
only the documentation require review and approval by only one core team
member in most cases. If the maintainer feels the changes are large or
likely to be controversial, two reviews should still be encouraged. The
second case is that of minor fixes which restore CI to a working state,
because these should be merged fairly quickly. Reach out on the
<a class="reference external" href="https://discuss.scientific-python.org/c/contributor/skimage">developer forum</a> if
you get no response to your pull request.
<strong>Never merge your own pull request.</strong></p></li>
</ul>
</section>
<section id="stylistic-guidelines">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Stylistic Guidelines</a><a class="headerlink" href="#stylistic-guidelines" title="Link to this heading">#</a></h2>
<ul>
<li><p>Set up your editor to remove trailing whitespace.  Follow <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP08</a>.</p></li>
<li><p>Use numpy data types instead of strings (<code class="docutils literal notranslate"><span class="pre">np.uint8</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">&quot;uint8&quot;</span></code>).</p></li>
<li><p>Use the following import conventions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="kn">import</span> <span class="nn">skimage</span> <span class="k">as</span> <span class="nn">ski</span>

<span class="n">sp</span><span class="o">.</span><span class="n">ndimage</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">ski</span><span class="o">.</span><span class="n">measure</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># only in Cython code</span>
<span class="n">cimport</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">cnp</span>
<span class="n">cnp</span><span class="o">.</span><span class="n">import_array</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>When documenting array parameters, use <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">:</span> <span class="pre">(M,</span> <span class="pre">N)</span> <span class="pre">ndarray</span></code>
and then refer to <code class="docutils literal notranslate"><span class="pre">M</span></code> and <code class="docutils literal notranslate"><span class="pre">N</span></code> in the docstring, if necessary.</p></li>
<li><p>Refer to array dimensions as (plane), row, column, not as x, y, z. See
<a class="reference internal" href="../user_guide/numpy_images.html#numpy-images-coordinate-conventions"><span class="std std-ref">Coordinate conventions</span></a>
in the user guide for more information.</p></li>
<li><p>Functions should support all input image dtypes.  Use utility functions such
as <code class="docutils literal notranslate"><span class="pre">img_as_float</span></code> to help convert to an appropriate type.  The output
format can be whatever is most efficient.  This allows us to string together
several functions into a pipeline, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hough</span><span class="p">(</span><span class="n">canny</span><span class="p">(</span><span class="n">my_image</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">Py_ssize_t</span></code> as data type for all indexing, shape and size variables
in C/C++ and Cython code.</p></li>
<li><p>Use relative module imports, i.e. <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">.._shared</span> <span class="pre">import</span> <span class="pre">xyz</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">skimage._shared</span> <span class="pre">import</span> <span class="pre">xyz</span></code>.</p></li>
<li><p>Wrap Cython code in a pure Python function, which defines the API. This
improves compatibility with code introspection tools, which are often not
aware of Cython code.</p></li>
<li><p>For Cython functions, release the GIL whenever possible, using
<code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">nogil:</span></code>.</p></li>
</ul>
</section>
<section id="testing">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Testing</a><a class="headerlink" href="#testing" title="Link to this heading">#</a></h2>
<p>The test suite must pass before a pull request can be merged, and
tests should be added to cover all modifications in behavior.</p>
<p>We use the <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> testing
framework, with tests located in the various
<code class="docutils literal notranslate"><span class="pre">skimage/submodule/tests</span></code> folders.</p>
<p>Testing requirements are listed in <em class="xref py py-obj">requirements/test.txt</em>.
Run:</p>
<ul class="simple">
<li><p><strong>All tests</strong>: <code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">test</span></code></p></li>
<li><p>Tests for a <strong>submodule</strong>: <code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">test</span> <span class="pre">skimage/morphology</span></code></p></li>
<li><p>Run tests from a <strong>specific file</strong>: <code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">test</span> <span class="pre">skimage/morphology/tests/test_gray.py</span></code></p></li>
<li><p>Run <strong>a test inside a file</strong>:
<code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">test</span> <span class="pre">skimage/morphology/tests/test_gray.py::test_3d_fallback_black_tophat</span></code></p></li>
<li><p>Run tests with <strong>arbitrary ``pytest`` options</strong>:
<code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">test</span> <span class="pre">--</span> <span class="pre">any</span> <span class="pre">pytest</span> <span class="pre">args</span> <span class="pre">you</span> <span class="pre">want</span></code>.</p></li>
<li><p>Run all tests and <strong>doctests</strong>:
<code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">test</span> <span class="pre">--</span> <span class="pre">--doctest-plus</span> <span class="pre">skimage</span></code></p></li>
</ul>
<section id="warnings-during-testing-phase">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Warnings during testing phase</a><a class="headerlink" href="#warnings-during-testing-phase" title="Link to this heading">#</a></h3>
<p>By default, warnings raised by the test suite result in errors.
You can switch that behavior off by setting the environment variable
<code class="docutils literal notranslate"><span class="pre">SKIMAGE_TEST_STRICT_WARNINGS</span></code> to <em class="xref py py-obj">0</em>.</p>
</section>
</section>
<section id="test-coverage">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Test coverage</a><a class="headerlink" href="#test-coverage" title="Link to this heading">#</a></h2>
<p>Tests for a module should ideally cover all code in that module,
i.e., statement coverage should be at 100%.</p>
<p>To measure test coverage run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ spin coverage
</pre></div>
</div>
<p>This will print a report with one line for each file in <a class="reference internal" href="../api/skimage.html#module-skimage" title="skimage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">skimage</span></code></a>,
detailing the test coverage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Name</span>                                             <span class="n">Stmts</span>   <span class="n">Exec</span>  <span class="n">Cover</span>   <span class="n">Missing</span>
<span class="o">------------------------------------------------------------------------------</span>
<span class="n">skimage</span><span class="o">/</span><span class="n">color</span><span class="o">/</span><span class="n">colorconv</span>                             <span class="mi">77</span>     <span class="mi">77</span>   <span class="mi">100</span><span class="o">%</span>
<span class="n">skimage</span><span class="o">/</span><span class="nb">filter</span><span class="o">/</span><span class="fm">__init__</span>                              <span class="mi">1</span>      <span class="mi">1</span>   <span class="mi">100</span><span class="o">%</span>
<span class="o">...</span>
</pre></div>
</div>
</section>
<section id="building-docs">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Building docs</a><a class="headerlink" href="#building-docs" title="Link to this heading">#</a></h2>
<p>To build the HTML documentation, run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>spin<span class="w"> </span>docs
</pre></div>
</div>
<p>Output is in <code class="docutils literal notranslate"><span class="pre">scikit-image/doc/build/html/</span></code>.  Add the <code class="docutils literal notranslate"><span class="pre">--clean</span></code>
flag to build from scratch, deleting any cached output.</p>
<section id="gallery">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Gallery</a><a class="headerlink" href="#gallery" title="Link to this heading">#</a></h3>
<p>The example gallery is built using
<a class="reference external" href="https://sphinx-gallery.github.io">Sphinx-Gallery</a>.
Refer to their documentation for complete usage instructions, and also
to existing examples in <code class="docutils literal notranslate"><span class="pre">doc/examples</span></code>.</p>
<p>Gallery examples should have a maximum figure width of 8 inches.
You can also <a class="reference external" href="https://sphinx-gallery.github.io/stable/configuration.html#choosing-thumbnail">change a gallery entry’s thumbnail</a>.</p>
</section>
<section id="fixing-warnings">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Fixing Warnings</a><a class="headerlink" href="#fixing-warnings" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>“citation not found: R###” There is probably an underscore after a
reference in the first line of a docstring (e.g. [1]_). Use this
method to find the source file: $ cd doc/build; grep -rin R####</p></li>
<li><p>“Duplicate citation R###, other instance in…”” There is probably a
[2] without a [1] in one of the docstrings</p></li>
<li><p>Make sure to use pre-sphinxification paths to images (not the
_images directory)</p></li>
</ul>
</section>
</section>
<section id="deprecation-cycle">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Deprecation cycle</a><a class="headerlink" href="#deprecation-cycle" title="Link to this heading">#</a></h2>
<p>If the way a function is called has to be changed, a deprecation cycle
must be followed to warn users.</p>
<p>A deprecation cycle is <em>not</em> necessary when:</p>
<ul class="simple">
<li><p>adding a new function, or</p></li>
<li><p>adding a new keyword argument to the <em>end</em> of a function signature, or</p></li>
<li><p>fixing unexpected or incorrect behavior.</p></li>
</ul>
<p>A deprecation cycle is necessary when:</p>
<ul class="simple">
<li><p>renaming keyword arguments, or</p></li>
<li><p>changing the order of arguments or keywords, or</p></li>
<li><p>adding arguments to a function, or</p></li>
<li><p>changing a function’s name or location, or</p></li>
<li><p>changing the default value of function arguments or keywords.</p></li>
</ul>
<p>Typically, deprecation warnings are in place for two releases, before
a change is made.</p>
<p>For example, consider the modification of a default value in
a function signature. In version N, we have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rescale</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do something.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    image : ndarray</span>
<span class="sd">        Input image.</span>
<span class="sd">    rescale : bool, optional</span>
<span class="sd">        Rescale the image unless ``False`` is given.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    out : ndarray</span>
<span class="sd">        The resulting image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rescale</span><span class="o">=</span><span class="n">rescale</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
<p>In version N+1, we will change this to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rescale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do something.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    image : ndarray</span>
<span class="sd">        Input image.</span>
<span class="sd">    rescale : bool, optional</span>
<span class="sd">        Rescale the image unless ``False`` is given.</span>

<span class="sd">        .. warning:: The default value will change from ``True`` to</span>
<span class="sd">                     ``False`` in skimage N+3.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    out : ndarray</span>
<span class="sd">        The resulting image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">rescale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;The default value of rescale will change &#39;</span>
             <span class="s1">&#39;to `False` in version N+3.&#39;</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">rescale</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rescale</span><span class="o">=</span><span class="n">rescale</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
<p>And, in version N+3:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rescale</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do something.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    image : ndarray</span>
<span class="sd">        Input image.</span>
<span class="sd">    rescale : bool, optional</span>
<span class="sd">        Rescale the image if ``True`` is given.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    out : ndarray</span>
<span class="sd">        The resulting image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rescale</span><span class="o">=</span><span class="n">rescale</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
<p>Here is the process for a 3-release deprecation cycle:</p>
<ul class="simple">
<li><p>Set the default to <em class="xref py py-obj">None</em>, and modify the
docstring to specify that the default is <em class="xref py py-obj">True</em>.</p></li>
<li><p>In the function, _if_ rescale is <em class="xref py py-obj">None</em>, set it to <em class="xref py py-obj">True</em> and warn that the
default will change to <em class="xref py py-obj">False</em> in version N+3.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">doc/release/release_dev.rst</span></code>, under deprecations, add “In
<em class="xref py py-obj">some_function</em>, the <em class="xref py py-obj">rescale</em> argument will default to <em class="xref py py-obj">False</em> in N+3.”</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">TODO.txt</span></code>, create an item in the section related to version
N+3 and write “change rescale default to False in some_function”.</p></li>
</ul>
<p>Note that the 3-release deprecation cycle is not a strict rule and, in some
cases, developers can agree on a different procedure.</p>
<section id="raising-warnings">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Raising Warnings</a><a class="headerlink" href="#raising-warnings" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">skimage</span></code> raises <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>s to highlight changes in its
API, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">warn</span>
<span class="n">warn</span><span class="p">(</span>
    <span class="s2">&quot;Automatic detection of the color channel was deprecated in &quot;</span>
    <span class="s2">&quot;v0.19, and `channel_axis=None` will be the new default in &quot;</span>
    <span class="s2">&quot;v0.22. Set `channel_axis=-1` explicitly to silence this &quot;</span>
    <span class="s2">&quot;warning.&quot;</span><span class="p">,</span>
    <span class="ne">FutureWarning</span><span class="p">,</span>
    <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warnings.warn">stacklevel</a> is
a bit of a technicality, but ensures that the warning points to the
user-called function, and not to a utility function within.</p>
<p>In most cases, set the <code class="docutils literal notranslate"><span class="pre">stacklevel</span></code> to <code class="docutils literal notranslate"><span class="pre">2</span></code>.
When warnings originate from helper routines internal to the
scikit-image library, set it to <code class="docutils literal notranslate"><span class="pre">3</span></code>.</p>
<p>To test if your warning is being emitted correctly, try calling the function
from an IPython console. It should point you to the console input itself
instead of being emitted by files in the scikit-image library:</p>
<ul class="simple">
<li><p><strong>Good</strong>: <code class="docutils literal notranslate"><span class="pre">ipython:1:</span> <span class="pre">UserWarning:</span> <span class="pre">...</span></code></p></li>
<li><p><strong>Bad</strong>: <code class="docutils literal notranslate"><span class="pre">scikit-image/skimage/measure/_structural_similarity.py:155:</span> <span class="pre">UserWarning:</span></code></p></li>
</ul>
</section>
<section id="deprecating-keywords-and-functions">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Deprecating Keywords and Functions</a><a class="headerlink" href="#deprecating-keywords-and-functions" title="Link to this heading">#</a></h3>
<p>When removing keywords or entire functions, the
<code class="docutils literal notranslate"><span class="pre">skimage._shared.utils.deprecate_parameter</span></code> and
<code class="docutils literal notranslate"><span class="pre">skimage._shared.utils.deprecate_func</span></code> utility functions can be used
to perform the above procedure.</p>
</section>
</section>
<section id="adding-data">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Adding Data</a><a class="headerlink" href="#adding-data" title="Link to this heading">#</a></h2>
<p>While code is hosted on <a class="reference external" href="https://github.com/scikit-image/">github</a>,
example datasets are on <a class="reference external" href="https://gitlab.com/scikit-image/data">gitlab</a>.
These are fetched with <a class="reference external" href="https://github.com/fatiando/pooch">pooch</a>
when accessing <em class="xref py py-obj">skimage.data.*</em>.</p>
<p>New datasets are submitted on gitlab and, once merged, the data
registry <code class="docutils literal notranslate"><span class="pre">skimage/data/_registry.py</span></code> in the main GitHub repository
can be updated.</p>
</section>
<section id="benchmarks">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Benchmarks</a><a class="headerlink" href="#benchmarks" title="Link to this heading">#</a></h2>
<p>While not mandatory for most pull requests, we ask that performance related
PRs include a benchmark in order to clearly depict the use-case that is being
optimized for. A historical view of our snapshots can be found on
at the following <a class="reference external" href="https://pandas.pydata.org/speed/scikit-image/">website</a>.</p>
<p>In this section we will review how to setup the benchmarks,
and three commands <code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">asv</span> <span class="pre">--</span> <span class="pre">dev</span></code>, <code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">asv</span> <span class="pre">--</span> <span class="pre">run</span></code> and
<code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">asv</span> <span class="pre">--</span> <span class="pre">continuous</span></code>.</p>
<section id="prerequisites">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Link to this heading">#</a></h3>
<p>Begin by installing <a class="reference external" href="https://asv.readthedocs.io/en/stable/">airspeed velocity</a>
in your development environment. Prior to installation, be sure to activate your
development environment, then if using <code class="docutils literal notranslate"><span class="pre">venv</span></code> you may install the requirement with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">skimage</span><span class="o">-</span><span class="n">dev</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">asv</span>
</pre></div>
</div>
<p>If you are using conda, then the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">skimage</span><span class="o">-</span><span class="n">dev</span>
<span class="n">conda</span> <span class="n">install</span> <span class="n">asv</span>
</pre></div>
</div>
<p>is more appropriate. Once installed, it is useful to run the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spin</span> <span class="n">asv</span> <span class="o">--</span> <span class="n">machine</span>
</pre></div>
</div>
<p>To let airspeed velocity know more information about your machine.</p>
</section>
<section id="writing-a-benchmark">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Writing a benchmark</a><a class="headerlink" href="#writing-a-benchmark" title="Link to this heading">#</a></h3>
<p>To write  benchmark, add a file in the <code class="docutils literal notranslate"><span class="pre">benchmarks</span></code> directory which contains a
a class with one <code class="docutils literal notranslate"><span class="pre">setup</span></code> method and at least one method prefixed with <code class="docutils literal notranslate"><span class="pre">time_</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">time_</span></code> method should only contain code you wish to benchmark.
Therefore it is useful to move everything that prepares the benchmark scenario
into the <code class="docutils literal notranslate"><span class="pre">setup</span></code> method. This function is called before calling a <code class="docutils literal notranslate"><span class="pre">time_</span></code>
method and its execution time is not factored into the benchmarks.</p>
<p>Take for example the <code class="docutils literal notranslate"><span class="pre">TransformSuite</span></code> benchmark:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">transform</span>

<span class="k">class</span> <span class="nc">TransformSuite</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Benchmark for transform routines in scikit-image.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">))</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">1500</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">[</span><span class="n">idx</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>

    <span class="k">def</span> <span class="nf">time_hough_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result1</span><span class="p">,</span> <span class="n">result2</span><span class="p">,</span> <span class="n">result3</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">hough_line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, the creation of the image is completed in the <code class="docutils literal notranslate"><span class="pre">setup</span></code> method, and not
included in the reported time of the benchmark.</p>
<p>It is also possible to benchmark features such as peak memory usage. To learn
more about the features, please refer to the official
<a class="reference external" href="https://asv.readthedocs.io/en/latest/writing_benchmarks.html">airspeed velocity documentation</a>.</p>
<p>Also, the benchmark files need to be importable when benchmarking old versions
of scikit-image. So if anything from scikit-image is imported at the top level,
it should be done as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">metrics</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The benchmarks themselves don’t need any guarding against missing features,
only the top-level imports.</p>
<p>To allow tests of newer functions to be marked as “n/a” (not available)
rather than “failed” for older versions, the setup method itself can raise a
NotImplemented error.  See the following example for the registration module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">registration</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;registration module not available&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="testing-the-benchmarks-locally">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Testing the benchmarks locally</a><a class="headerlink" href="#testing-the-benchmarks-locally" title="Link to this heading">#</a></h3>
<p>Prior to running the true benchmark, it is often worthwhile to test that the
code is free of typos. To do so, you may use the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spin</span> <span class="n">asv</span> <span class="o">--</span> <span class="n">dev</span> <span class="o">-</span><span class="n">b</span> <span class="n">TransformSuite</span>
</pre></div>
</div>
<p>Where the <code class="docutils literal notranslate"><span class="pre">TransformSuite</span></code> above will be run once in your current environment
to test that everything is in order.</p>
</section>
<section id="running-your-benchmark">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Running your benchmark</a><a class="headerlink" href="#running-your-benchmark" title="Link to this heading">#</a></h3>
<p>The command above is fast, but doesn’t test the performance of the code
adequately. To do that you may want to run the benchmark in your current
environment to see the performance of your change as you are developing new
features. The command <code class="docutils literal notranslate"><span class="pre">asv</span> <span class="pre">run</span> <span class="pre">-E</span> <span class="pre">existing</span></code> will specify that you wish to run
the benchmark in your existing environment. This will save a significant amount
of time since building scikit-image can be a time consuming task:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spin</span> <span class="n">asv</span> <span class="o">--</span> <span class="n">run</span> <span class="o">-</span><span class="n">E</span> <span class="n">existing</span> <span class="o">-</span><span class="n">b</span> <span class="n">TransformSuite</span>
</pre></div>
</div>
</section>
<section id="comparing-results-to-main">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Comparing results to main</a><a class="headerlink" href="#comparing-results-to-main" title="Link to this heading">#</a></h3>
<p>Often, the goal of a PR is to compare the results of the modifications in terms
speed to a snapshot of the code that is in the main branch of the
<code class="docutils literal notranslate"><span class="pre">scikit-image</span></code> repository. The command <code class="docutils literal notranslate"><span class="pre">asv</span> <span class="pre">continuous</span></code> is of help here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spin</span> <span class="n">asv</span> <span class="o">--</span> <span class="n">continuous</span> <span class="n">main</span> <span class="o">-</span><span class="n">b</span> <span class="n">TransformSuite</span>
</pre></div>
</div>
<p>This call will build out the environments specified in the <code class="docutils literal notranslate"><span class="pre">asv.conf.json</span></code>
file and compare the performance of the benchmark between your current commit
and the code in the main branch.</p>
<p>The output may look something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ spin asv -- continuous main -b TransformSuite
· Creating environments
· Discovering benchmarks
·· Uninstalling from conda-py3.7-cython-numpy1.15-scipy
·· Installing 544c0fe3 &lt;benchmark_docs&gt; into conda-py3.7-cython-numpy1.15-scipy.
· Running 4 total benchmarks (2 commits * 2 environments * 1 benchmarks)
[  0.00%] · For scikit-image commit 37c764cb &lt;benchmark_docs~1&gt; (round 1/2):
[...]
[100.00%] ··· ...ansform.TransformSuite.time_hough_line           33.2±2ms

BENCHMARKS NOT SIGNIFICANTLY CHANGED.
</pre></div>
</div>
<p>In this case, the differences between HEAD and main are not significant
enough for airspeed velocity to report.</p>
<p>It is also possible to get a comparison of results for two specific revisions
for which benchmark results have previously been run via the <em class="xref py py-obj">asv compare</em>
command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spin</span> <span class="n">asv</span> <span class="o">--</span> <span class="n">compare</span> <span class="n">v0</span><span class="mf">.14.5</span> <span class="n">v0</span><span class="mf">.17.2</span>
</pre></div>
</div>
<p>Finally, one can also run ASV benchmarks only for a specific commit hash or
release tag by appending <code class="docutils literal notranslate"><span class="pre">^!</span></code> to the commit or tag name. For example to run
the skimage.filter module benchmarks on release v0.17.2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>spin asv -- run -b Filter v0.17.2^!
</pre></div>
</div>
</section>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#development-process">Development process</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#divergence-between-upstream-main-and-your-feature-branch">Divergence between <code class="docutils literal notranslate"><span class="pre">upstream</span> <span class="pre">main</span></code> and your feature branch</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guidelines">Guidelines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stylistic-guidelines">Stylistic Guidelines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing">Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#warnings-during-testing-phase">Warnings during testing phase</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-coverage">Test coverage</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-docs">Building docs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gallery">Gallery</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fixing-warnings">Fixing Warnings</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecation-cycle">Deprecation cycle</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raising-warnings">Raising Warnings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecating-keywords-and-functions">Deprecating Keywords and Functions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-data">Adding Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#benchmarks">Benchmarks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-a-benchmark">Writing a benchmark</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-the-benchmarks-locally">Testing the benchmarks locally</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-your-benchmark">Running your benchmark</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comparing-results-to-main">Comparing results to main</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/development/contribute.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2013-2024, the scikit-image team.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    <br/>
  </p>
</div>
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>